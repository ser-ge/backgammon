(this["webpackJsonpbg-client"]=this["webpackJsonpbg-client"]||[]).push([[0],{53:function(e,t,a){e.exports=a(95)},58:function(e,t,a){},63:function(e,t,a){},92:function(e,t){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),l=a.n(r),i=a(11),o=a(3),s=a(4),m=a(5),d=a(6),u=a(15),g=a(12),p=a(2),h=(a(58),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getSvgPointStyle=function(e){return{className:"svg-triangle",width:"100%",height:"100%",transform:e>12?"scale(1,1)":"scale(1,-1)",fill:e%2==0?"ivory":"black",bottom:"0%",left:"25%",zIndex:"3"}},e.getSvgCheckersStyle=function(e){return 0==e||25==e?{position:"absolute",width:"100%",height:"50%",top:"0%",left:"0%",overflow:"visible",zIndex:"10"}:{position:"absolute",transform:e>12?"scale(1,1)":"scale(1,-1)",width:"100%",height:"200%",top:e>12?"-100%":"0%",left:"0%",zIndex:"10"}},e.getPointStyle=function(e){return 0==e||25==e?{className:"point",alignItems:"space-around",margin:"none",border:"none",backgroundColor:"inherit",height:"100%",width:"100%",position:"relative",alignSelf:"centre"}:{className:"point",gridRow:e<13?"1":"3",alignItems:"centre",margin:"none",border:"none",backgroundColor:"inherit",height:"100%",width:"100%",position:"relative"}},e}return Object(s.a)(a,[{key:"drawCheckers",value:function(e,t){var a=0==t||25==t?"9.5vw":30;return Array.from(Array(Math.abs(e)).keys()).map((function(n){return c.a.createElement("circle",{cx:"50%",cy:100-(r=n,(r+.5)*a*2+2)+"%",r:a,stroke:"grey","stroke-width":0==t||25==t?10:2,fill:e>0?"ivory":"black"});var r}))}},{key:"render",value:function(){var e=this.props.point,t=e.value,a=e.id;return c.a.createElement("button",{onClick:this.props.onClick.bind(this,a),width:"100%",style:this.getPointStyle(a)},"bar"!=this.props.row&&c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:this.getSvgPointStyle(a)},c.a.createElement("polygon",{points:"50,0 90,100 10,100"})),c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMaxYMax",style:this.getSvgCheckersStyle(a)},this.drawCheckers(t,a)))}}]),a}(c.a.Component)),f=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return this.props.points.map((function(t){return c.a.createElement(h,{point:t,onClick:e.props.handlePointClick,row:e.props.row,orient:e.props.orient})}))}}]),a}(c.a.Component),v=a(18),b=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getCheckerStyle=function(e,t){return{gridRowStart:1===t?15-e:"",backgroundColor:-1===t?"black":"ivory"}},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"beared-off"},c.a.createElement("div",{className:"beared-off-section top"},Object(v.a)(Array(this.props.bearedOff[-1]).keys()).map((function(t){return c.a.createElement("div",{className:"beared-checker",style:e.getCheckerStyle(t,-1)})}))),c.a.createElement("div",{className:"beared-off-section bottom"},Object(v.a)(Array(this.props.bearedOff[1]).keys()).map((function(t){return c.a.createElement("div",{className:"beared-checker",style:e.getCheckerStyle(t,1)})}))))}}]),a}(n.Component);function E(e){var t=e.active,a=e.faceValue,n=e.handleDiceThrow,r="&#x"+(isNaN(a)?"25a2":String(2680+a-1))+";";return c.a.createElement("span",{onClick:n,className:"diceFace",style:{fontSize:t?"6em":"5em",color:"black",height:"20%"},dangerouslySetInnerHTML:{__html:"".concat(r)}})}function w(e){var t=e.dice,a=e.switchDice,r=e.handleDiceThrow,l=Object(n.useState)([6,6]),i=Object(p.a)(l,2),o=i[0],s=i[1],m=Object(n.useState)(!0),d=Object(p.a)(m,2),u=d[0],g=d[1],h=function(){0!=t.length?a():r()};return Object(n.useEffect)((function(){t.length>1&&s(t),1===t.length&&g(!u)}),[t]),c.a.createElement("div",{className:"dice"},c.a.createElement(E,{key:0,active:!u,faceValue:o[0],handleDiceThrow:h}),c.a.createElement(E,{key:1,active:u,faceValue:o[1],handleDiceThrow:h}))}c.a.Component;function k(e){var t=e.socket,a=e.pSign,r=e.gameId,l=e.gameData,o=e.switchDice,s=Object(n.useState)(0),m=Object(p.a)(s,2),d=(m[0],m[1],function(e,n){t.emit(e,Object(i.a)({},n,{player_sign:a,room:r}))}),u=function(e){d("move",{start:e,roll:l.dice[0]})},g=l.points.slice(1,13).reverse(),h=l.points.slice(13,25),v=l.points.slice(0,1).concat(l.points.slice(-1)),E=1==a,k={top:E?g:h,bottom:E?h:g,bar:E?v:v.reverse()};return c.a.createElement("div",{className:"board",style:y},c.a.createElement("div",{className:"game-back-board z-depth-4"},c.a.createElement("div",{className:"centre-board"},c.a.createElement(f,{row:"points-top",points:k.top,handlePointClick:u,orient:"down"}),c.a.createElement(w,{dice:l.dice,handleDiceThrow:function(){d("roll_dice")},switchDice:o}),c.a.createElement(f,{row:"points-bottom",points:k.bottom,handlePointClick:u,orient:"up"}),c.a.createElement("div",{className:"bar centre"},c.a.createElement("div",{className:"bar-gap"},c.a.createElement(f,{points:k.bar,handlePointClick:u,row:"bar"}))))),c.a.createElement(b,{bearedOff:l.bearedOff}))}var y={display:"grid",gridTemplateColumns:"1fr 0.1fr",gridTemplateRowsows:"1fr",gap:"10px",minHeight:"60vh"},j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement(n.Fragment,null,c.a.createElement(u.b,{className:N,to:"/game/".concat(this.props.id),style:O,onClick:function(){return e.props.handleStartGameClick()}},"Start Game"),c.a.createElement(u.a,{path:"/game/:game_id",render:function(t){return c.a.createElement(T,Object.assign({},t,{socket:e.props.socket}))}})," ")}}]),a}(c.a.Component),N="modal-action modal-close waves-effect waves-light btn deep-orange darken-4 left-align",O={fontSize:"1vw"},S=a(33),C=a.n(S);function _(e){var t=e.socket,a=e.gameId,r=e.handleNewGameClick,l=Object(n.useState)("Player 1"),i=Object(p.a)(l,2),o=i[0],s=i[1],m=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.querySelectorAll(".modal");C.a.Modal.init(e,{dismissable:!1,opacity:0})}),[]),c.a.createElement(n.Fragment,null,c.a.createElement("a",{className:x,style:I,onClick:function(){return r()},href:"#modal1"},"New Game"),c.a.createElement("div",{id:"modal1",className:"modal"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"input-field col s12"},c.a.createElement("input",{placeholder:"Player 1",id:"name",type:"text",class:"validate",value:o,onChange:function(e){s(e.target.value)}}),c.a.createElement("label",{for:"name"},"Enter Name:")),c.a.createElement("div",{className:"row"},c.a.createElement("form",{className:"col s12"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s8"},c.a.createElement("i",{className:"material-icons prefix"},"link"),c.a.createElement("textarea",{id:"game-link",className:"materialize-textarea",ref:m,value:window.location.hostname+":3000/game/"+a}),c.a.createElement("label",{for:"game-link"},"Share this link with opponent:")),c.a.createElement("div",{className:"input-field col s4"},c.a.createElement("button",{onClick:function(e){m.current.select(),e.preventDefault(),document.execCommand("copy"),C.a.toast({html:"Link Copied",displayLength:500})},className:"waves-effect waves-light btn-small  "},"Copy Link")," "))))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(j,{handleStartGameClick:function(){},socket:t,id:a}))))}var x="waves-effect waves-light btn-small deep-orange darken-4 left-align modal-trigger",I={fontSize:"1vw"},D=(c.a.Component,{display:"grid",alignItems:"centre",justifyItems:"centre"});var G=function(e){e.pSign,e.player,e.turn;var t=!0,a="Player 2",r=c.a.createElement("div",{classNmae:"progress"},c.a.createElement("div",{class:"indeterminate"}));return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"col s3"},c.a.createElement("div",{className:"btn-flat deep-orange lighten-4 col"}," ",t?a:"connecting.. "),!t&&r))};a(63);function P(e){var t=e.socket,a=e.gameId,r=e.pSign,l=Object(n.useState)([{text:"hi",isMine:!1},{text:"Hello",isMine:!0}]),i=Object(p.a)(l,2),o=i[0],s=i[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),u=d[0],g=d[1];return Object(n.useEffect)((function(){t.on("message",(function(e){return function(e,t){console.log(t),s((function(t){return[].concat(Object(v.a)(t),[e])}))}(e)}))}),[]),c.a.createElement(n.Fragment,null,c.a.createElement("div",{class:"chat"},c.a.createElement("div",{class:"messages"},c.a.createElement("div",{class:"messages-content mCustomScrollbar _mCS_1 mCS_no_scrollbar",style:{overflow:"auto",display:"flex",flexDirection:"column-reverse"}},c.a.createElement("div",{id:"mCSB_1",class:"mCustomScrollBox mCS-light mCSB_vertical mCSB_inside",style:{maxHeight:"none"},tabindex:"0"},c.a.createElement("div",{id:"mCSB_1_container",class:"mCSB_container mCS_y_hidden mCS_no_scrollbar_y",style:{position:"relative",top:"0",left:"0",overflow:"auto",height:"100%"},dir:"ltr"},o.map((function(e){return c.a.createElement("div",{className:e.pSign==r?"message message-personal new":"message new"},e.text)})))))),c.a.createElement("div",{class:"message-box"},c.a.createElement("textarea",{type:"text",class:"message-input",placeholder:"Type message...",value:u,onChange:function(e){e.preventDefault(),g(e.target.value)}}),c.a.createElement("button",{type:"submit",class:"message-submit",onClick:function(){var e={text:u,pSign:r,gameId:a};t.emit("message",e),console.log(e),g("")}},"Send"))),c.a.createElement("div",{class:"bg"}))}function T(e){var t=e.newGameId,a=e.pSignProp,r=e.socket,l=e.match.params,o=(e.handleNewGameClick,Object(n.useState)({})),s=Object(p.a)(o,2),m=s[0],d=s[1],u=Object(n.useState)(!0),g=Object(p.a)(u,2),h=g[0],f=g[1],v=Object(n.useState)(!0),b=Object(p.a)(v,2),E=b[0],w=b[1],y=Object(n.useState)(t),j=Object(p.a)(y,2),N=(j[0],j[1]),O=Object(n.useState)(a),S=Object(p.a)(O,2),C=S[0],_=S[1],x="http://localhost:5000/api/join_game?game_id="+l.game_id;console.log(x);Object(n.useEffect)((function(){m.gameId;void 0===t&&fetch(x,{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return function(e){console.log("Fetching Data"),console.log(e),d(Object(i.a)({},m,{},e)),_(e.pSign),N(e.gameId)}(e)})).then((function(){return f(!1)})),r.emit("join",{gameId:l.game_id}),r.on("game_data",(function(e){return function(e){d(Object(i.a)({},m,{},e)),f(!1)}(e)}))}),[]);var I=m.players,D=(m.opSign,m.turn);return h?c.a.createElement("div",{className:"preloader-wrapper active"},c.a.createElement("div",{className:"spinner-layer spinner-red-only"},c.a.createElement("div",{className:"circle-clipper left"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"gap-patch"},c.a.createElement("div",{className:"circle"})),c.a.createElement("div",{className:"circle-clipper right"},c.a.createElement("div",{className:"circle"})))):c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"row",style:{height:"10vh"}}),c.a.createElement("div",{className:E?"col s9":"col s12"},c.a.createElement("div",{className:"row"},c.a.createElement(G,{socket:r,turn:D,pSign:C,gameId:l.game_id,player:I[-1]})),c.a.createElement("div",{className:"row"},c.a.createElement(k,{gameId:l.game_id,pSign:C,socket:r,gameData:m,switchDice:function(){d(Object(i.a)({},m,{dice:m.dice.reverse()}))}})),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"btn-flat deep-orange lighten-4 col s2"},"Player 1"),c.a.createElement("button",{className:"btn deep-orange waves-effect waves-light  lighten-2 col s2 offset-s5"},"Resign"),c.a.createElement("button",{className:"btn deep-orange waves-effect waves-light  lighten-2 col s2 offset-s1",onClick:function(){return w(!E)}},"Chat",c.a.createElement("i",{class:"material-icons right"},E?"keyboard_arrow_right":"keyboard_arrow_left")))),E&&c.a.createElement("div",{className:"col s3"},c.a.createElement(P,{socket:r,gameId:l.game_id,pSign:C})," "))}function A(e){var t=e.socket,a=e.id,r=e.handleNewGameClick,l=Object(n.useState)(""),i=Object(p.a)(l,2);i[0],i[1];return c.a.createElement(n.Fragment,null,c.a.createElement(_,{socket:t,gameId:a,handleNewGameClick:r}))}var B=a(52),z=a.n(B),F=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getData=function(e){console.log(e),n.setState(Object(i.a)({},e))},n.handleNewGameClick=function(){fetch("http://localhost:5000/api/new_game",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return n.getData(e)}))},n.state={socket:z()("http://localhost:5000")},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("mount_run"),this.state.socket.on("join",this.getData)}},{key:"render",value:function(){var e=this,t=this.state.socket;return c.a.createElement(u.a,null,c.a.createElement("div",{className:"row"},c.a.createElement(g.c,null,c.a.createElement(g.a,{exact:!0,path:"/",render:function(a){return c.a.createElement(A,Object.assign({},a,{socket:t,id:e.state.gameId,handleNewGameClick:e.handleNewGameClick}))}}),c.a.createElement(g.a,{path:"/game/:game_id",render:function(a){return c.a.createElement(T,Object.assign({},a,{socket:t,newGameId:e.state.gameId,pSignProp:e.state.pSign,handleNewGameClick:e.handleNewGameClick}))}}))))}}]),a}(n.Component);l.a.render(c.a.createElement("div",{className:"container valign-wrapper"},c.a.createElement(F,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.bbd8b358.chunk.js.map